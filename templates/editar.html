<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editar Registro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .btn-custom {
      min-width: 140px;
    }
  </style>
</head>
<body>

<!-- ===================== -->
<!-- NAVBAR -->
<!-- ===================== -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="{{ url_for('principal') }}">üñ•Ô∏è Mantenimiento</a>
    <div class="d-flex">
      <span class="navbar-text text-white me-3">üëã {{ session.get('nombre') }}</span>
      <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm">Cerrar sesi√≥n</a>
    </div>
  </div>
</nav>

<div class="container-fluid py-4">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="card mx-auto col-lg-10 col-md-12 p-4">
    <h2 class="text-center mb-4 fw-bold">Editar Registro #{{ registro.id }}</h2>

    <form action="{{ url_for('actualizar_registro', rid=registro.id) }}" method="post" class="row g-3">
      {% set is_admin = session.get('rol') == 'admin' %}
      {% set readonly = '' if is_admin else 'readonly' %}

      <div class="col-md-6">
        <label class="form-label fw-bold">Sede</label>
        <input type="text" name="sede" class="form-control" value="{{ registro.sede }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Fecha</label>
        <input type="date" name="fecha" class="form-control" value="{{ registro.fecha }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">√Årea</label>
        <input type="text" name="area" class="form-control" value="{{ registro.area }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">T√©cnico</label>
        <input type="text" name="tecnico" class="form-control" value="{{ registro.tecnico }}" readonly>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Nombre M√°quina</label>
        <input type="text" name="nombre_maquina" class="form-control text-uppercase" value="{{ registro.nombre_maquina }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Usuario del Equipo</label>
        <input type="text" name="usuario_equipo" class="form-control" value="{{ registro.usuario }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Tipo de Equipo</label>
        <input type="text" name="tipo_equipo" class="form-control" value="{{ registro.tipo_equipo }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Marca</label>
        <input type="text" name="marca" class="form-control text-uppercase" value="{{ registro.marca }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Modelo</label>
        <input type="text" name="modelo" class="form-control text-uppercase" value="{{ registro.modelo }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Serial</label>
        <input type="text" name="serial" class="form-control text-uppercase" value="{{ registro.serial }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Sistema Operativo</label>
        <input type="text" name="so" class="form-control" value="{{ registro.sistema_operativo }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Office</label>
        <input type="text" name="office" class="form-control" value="{{ registro.office }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Antivirus</label>
        <input type="text" name="antivirus" class="form-control" value="{{ registro.antivirus }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Compresor</label>
        <input type="text" name="compresor" class="form-control" value="{{ registro.compresor }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Control Remoto</label>
        <input type="text" name="control_remoto" class="form-control" value="{{ registro.control_remoto }}" {{ readonly }}>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-bold">Activo Fijo</label>
        <input type="text" name="activo_fijo" class="form-control" value="{{ registro.activo_fijo }}" {{ readonly }}>
      </div>

      <div class="col-12">
        <label class="form-label fw-bold">Observaciones</label>
        <textarea name="observaciones" rows="4" class="form-control" {{ readonly }}>{{ registro.observaciones }}</textarea>
      </div>

      <div class="col-12 text-center mt-4">
        {% if is_admin %}
          <button type="submit" class="btn btn-success btn-custom me-3 shadow-sm">üíæ Guardar Cambios</button>
        {% else %}
          <button type="button" class="btn btn-secondary btn-custom me-3 shadow-sm" disabled>Solo lectura</button>
        {% endif %}
        <a href="{{ url_for('principal') }}" class="btn btn-outline-dark btn-custom shadow-sm">‚¨ÖÔ∏è Volver</a>
      </div>
    </form>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
